<template>
  <WriterLayout>
    <!-- Main Content -->
    <div class="lg:col-span-3">
      <!-- Dashboard Header -->
      <div class="rounded-xl shadow-sm p-6 mb-6">
        <h2 class="text-2xl text-gray-800 dark:text-white font-bold mb-6">
          ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
        </h2>

        <!-- Overview Stats -->
        <div class="grid md:grid-cols-3 gap-6 mb-6">
          <div
            class="stats-card bg-gradient-to-r from-orange-100 to-pink-100 p-6 rounded-xl"
          >
            <div class="flex items-center justify-between">
              <div>
                <h3 class="text-lg font-semibold text-gray-700">
                  ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </h3>
                <p class="text-3xl font-bold text-orange-600 mt-2">
                  {{ totalWorks }}
                </p>
                <p class="text-sm text-gray-600 mt-1">‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</p>
              </div>
              <div
                class="w-16 h-16 bg-white rounded-full flex items-center justify-center"
              >
                <span class="text-2xl">üìö</span>
              </div>
            </div>
          </div>

          <div
            class="stats-card bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-xl"
          >
            <div class="flex items-center justify-between">
              <div>
                <h3 class="text-lg font-semibold text-gray-700">‡∏¢‡∏≠‡∏î‡∏ß‡∏¥‡∏ß‡∏£‡∏ß‡∏°</h3>
                <p class="text-3xl font-bold text-blue-600 mt-2">
                  {{ totalViews.toLocaleString() }}
                </p>
                <p class="text-sm text-gray-600 mt-1">‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
              </div>
              <div
                class="w-16 h-16 bg-white rounded-full flex items-center justify-center"
              >
                <span class="text-2xl">üëÅÔ∏è</span>
              </div>
            </div>
          </div>

          <div
            class="stats-card bg-gradient-to-r from-green-100 to-teal-100 p-6 rounded-xl"
          >
            <div class="flex items-center justify-between">
              <div>
                <h3 class="text-lg font-semibold text-gray-700">
                  ‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏£‡∏ß‡∏°
                </h3>
                <p class="text-3xl font-bold text-green-600 mt-2">
                  {{ totalFollowers.toLocaleString() }}
                </p>
                <p class="text-sm text-gray-600 mt-1">‡∏Ñ‡∏ô</p>
              </div>
              <div
                class="w-16 h-16 bg-white rounded-full flex items-center justify-center"
              >
                <span class="text-2xl">‚ù§Ô∏è</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Charts Section -->
      <div class="grid md:grid-cols-2 gap-6 mb-6">
        <!-- Views Chart -->
        <div class="bg-white rounded-xl shadow-sm p-6">
          <h3 class="text-lg font-bold text-gray-800 mb-4">‡∏¢‡∏≠‡∏î‡∏ß‡∏¥‡∏ß‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h3>
          <div
            class="h-64 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg flex items-center justify-center"
          >
            <p class="text-gray-500">‡∏Å‡∏£‡∏≤‡∏ü‡∏¢‡∏≠‡∏î‡∏ß‡∏¥‡∏ß (‡πÉ‡∏ô development)</p>
          </div>
        </div>

        <!-- Popular Works -->
        <div class="bg-white rounded-xl shadow-sm p-6">
          <h3 class="text-lg font-bold text-gray-800 mb-4">‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</h3>
          <div class="space-y-3">
            <div
              v-for="work in popularWorks"
              :key="work.id"
              class="flex items-center justify-between p-3 bg-gray-50 rounded-lg"
            >
              <div class="flex items-center space-x-3">
                <div
                  class="w-8 h-8 bg-orange-200 rounded text-center leading-8 text-sm font-bold"
                >
                  {{ work.rank }}
                </div>
                <div>
                  <p class="font-medium text-gray-800">{{ work.title }}</p>
                  <p class="text-sm text-gray-600">{{ work.type }}</p>
                </div>
              </div>
              <div class="text-right">
                <p class="font-semibold text-gray-800">
                  {{ work.views.toLocaleString() }}
                </p>
                <p class="text-sm text-gray-600">‡∏ß‡∏¥‡∏ß</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="bg-white rounded-xl shadow-sm p-6">
        <h3 class="text-lg font-bold text-gray-800 mb-4">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
        <div class="space-y-4">
          <div
            v-for="activity in recentActivities"
            :key="activity.id"
            class="flex items-start space-x-4"
          >
            <div class="w-2 h-2 bg-orange-400 rounded-full mt-2"></div>
            <div class="flex-1">
              <p class="text-gray-800">{{ activity.message }}</p>
              <p class="text-sm text-gray-600">
                {{ formatDate(activity.date) }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </WriterLayout>
</template>

<script setup>
definePageMeta({
  layout: "default",
});

// Mock data for dashboard
const totalWorks = ref(12);
const totalViews = ref(150420);
const totalFollowers = ref(3240);

const popularWorks = ref([
  { id: 1, rank: 1, title: "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡πÅ‡∏´‡πà‡∏á‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß", type: "‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢", views: 45000 },
  { id: 2, rank: 2, title: "‡∏Å‡∏≤‡∏£‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Æ‡∏µ‡πÇ‡∏£‡πà", type: "‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô", views: 38000 },
  { id: 3, rank: 3, title: "‡∏£‡∏±‡∏Å‡πÉ‡∏ô‡∏¢‡∏∏‡∏Ñ‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•", type: "‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢", views: 32000 },
  { id: 4, rank: 4, title: "‡∏ô‡∏±‡∏Å‡∏™‡∏π‡πâ‡πÅ‡∏´‡πà‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï", type: "‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô", views: 28000 },
  { id: 5, rank: 5, title: "‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÉ‡∏ô‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢", type: "‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢", views: 22000 },
]);

const recentActivities = ref([
  {
    id: 1,
    message: "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á '‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡πÅ‡∏´‡πà‡∏á‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß'",
    date: new Date(),
  },
  {
    id: 2,
    message: "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏´‡∏°‡πà 15 ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô",
    date: new Date(Date.now() - 2 * 60 * 60 * 1000),
  },
  {
    id: 3,
    message: "‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà 8 ‡∏Ñ‡∏ô",
    date: new Date(Date.now() - 5 * 60 * 60 * 1000),
  },
  {
    id: 4,
    message: "‡∏ú‡∏•‡∏á‡∏≤‡∏ô '‡∏Å‡∏≤‡∏£‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Æ‡∏µ‡πÇ‡∏£‡πà' ‡∏ñ‡∏π‡∏Å‡πÅ‡∏ä‡∏£‡πå 12 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á",
    date: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
  },
]);

const formatDate = (date) => {
  const now = new Date();
  const diff = now - date;
  const minutes = Math.floor(diff / (1000 * 60));
  const hours = Math.floor(diff / (1000 * 60 * 60));
  const days = Math.floor(diff / (1000 * 60 * 60 * 24));

  if (minutes < 60) {
    return `${minutes} ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
  } else if (hours < 24) {
    return `${hours} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
  } else {
    return `${days} ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
  }
};
</script>

<style scoped>
.stats-card {
  transition: all 0.3s ease;
}

.stats-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}
</style>
